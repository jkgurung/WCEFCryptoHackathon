<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Well-Time</title>
  <script src="https://cdn.temasys.io/skylink/skylinkjs/0.6.x/skylink.complete.min.js"></script>
  <script>
      var skylink = new Skylink();

      skylink.on('peerJoined', function(peerId, peerInfo, isSelf) {
        /* We already have a video element for our video
         * and don't need to create a new one. */
        if(isSelf) return;
        var vid = document.createElement('video');
        vid.autoplay = true;

        // Added to avoid feedback when testing locally
        vid.muted = true;
        vid.id = peerId;
        document.body.appendChild(vid);
      });

      skylink.on('incomingStream', function(peerId, stream, isSelf) {
        if(isSelf) return;
        var vid = document.getElementById(peerId);
        attachMediaStream(vid, stream);
      });

      skylink.on('peerLeft', function(peerId, peerInfo, isSelf) {
        var vid = document.getElementById(peerId);
        document.body.removeChild(vid);
      });

      skylink.on('mediaAccessSuccess', function(stream) {
        var vid = document.getElementById('myvideo'); attachMediaStream(vid, stream);
      });

      skylink.init({
        apiKey: '4104a99d-08c6-42db-b8f1-7412b31ffca2',
        defaultRoom: 'My Room'
      }, function() {
        skylink.joinRoom({
          audio: true,
          video: true
        });
      });
    </script>
</head>
<body>
  <button onclick="start()">Share Screen</button><br/>
  <video id="myvideo" style="transform: rotateY(-180deg);" autoplay muted></video>
</body>
</html>
